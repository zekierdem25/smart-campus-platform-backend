{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zekierdem\\\\Desktop\\\\web_final\\\\frontend\\\\src\\\\pages\\\\ResetPassword.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ResetPassword.jsx\nimport { useState } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport api from \"../api/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ResetPassword() {\n  _s();\n  const {\n    token\n  } = useParams();\n  const navigate = useNavigate();\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n    if (!token) {\n      setError(\"Geçersiz veya eksik şifre sıfırlama linki.\");\n      return;\n    }\n    if (!password || !confirmPassword) {\n      setError(\"Lütfen yeni şifrenizi ve şifre tekrarını girin.\");\n      return;\n    }\n    if (password.length < 8) {\n      setError(\"Şifre en az 8 karakter olmalıdır.\");\n      return;\n    }\n    if (password !== confirmPassword) {\n      setError(\"Şifre ve şifre tekrarı eşleşmiyor.\");\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      var _res$data;\n      // Backend DTO'suna göre bu alan adları değişebilir.\n      // En yaygın olan: { token, newPassword, confirmPassword }\n      const payload = {\n        token,\n        newPassword: password,\n        confirmPassword\n      };\n      console.log(\"Reset password payload:\", payload);\n      const res = await api.post(\"/auth/reset-password\", payload);\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.success) {\n        setSuccess(\"Şifreniz başarıyla güncellendi. 3 saniye içinde giriş sayfasına yönlendirileceksiniz.\");\n        setPassword(\"\");\n        setConfirmPassword(\"\");\n        setTimeout(() => {\n          navigate(\"/login\");\n        }, 3000);\n      } else {\n        var _res$data2;\n        setError(((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.message) || \"Şifre sıfırlama işlemi gerçekleştirilemedi. Link geçersiz veya süresi dolmuş olabilir.\");\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Reset password error:\", err);\n      const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Şifre sıfırlama sırasında bir hata oluştu. Lütfen daha sonra tekrar deneyin.\";\n      setError(msg);\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"title\",\n      children: \"Yeni \\u015Eifre Belirle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: 14,\n        marginBottom: 10\n      },\n      children: \"L\\xFCtfen yeni \\u015Fifrenizi belirleyin. \\u015Eifreniz en az 8 karakter olmal\\u0131d\\u0131r.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        placeholder: \"Yeni \\u015Fifre\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        placeholder: \"Yeni \\u015Fifre (tekrar)\",\n        value: confirmPassword,\n        onChange: e => setConfirmPassword(e.target.value),\n        style: {\n          marginTop: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          marginTop: 10,\n          fontSize: 14\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"green\",\n          marginTop: 10,\n          fontSize: 14\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        type: \"submit\",\n        disabled: isSubmitting,\n        style: {\n          marginTop: 12\n        },\n        children: isSubmitting ? \"Şifre güncelleniyor...\" : \"Şifreyi güncelle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: 15\n      },\n      children: [\"Giri\\u015F sayfas\\u0131na d\\xF6nmek i\\xE7in\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        style: {\n          color: \"#1a73e8\",\n          fontWeight: 600\n        },\n        children: \"t\\u0131klay\\u0131n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(ResetPassword, \"4i9520WZftw+Z/1jU8CAlTRPN/I=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ResetPassword;\nvar _c;\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"names":["useState","useParams","useNavigate","Link","api","jsxDEV","_jsxDEV","ResetPassword","_s","token","navigate","password","setPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","isSubmitting","setIsSubmitting","handleSubmit","e","preventDefault","length","_res$data","payload","newPassword","console","log","res","post","data","setTimeout","_res$data2","message","err","_err$response","_err$response$data","msg","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","marginBottom","onSubmit","type","placeholder","value","onChange","target","marginTop","color","disabled","to","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/zekierdem/Desktop/web_final/frontend/src/pages/ResetPassword.jsx"],"sourcesContent":["// frontend/src/pages/ResetPassword.jsx\r\nimport { useState } from \"react\";\r\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\r\nimport api from \"../api/axios\";\r\n\r\nexport default function ResetPassword() {\r\n  const { token } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    if (!token) {\r\n      setError(\"Geçersiz veya eksik şifre sıfırlama linki.\");\r\n      return;\r\n    }\r\n\r\n    if (!password || !confirmPassword) {\r\n      setError(\"Lütfen yeni şifrenizi ve şifre tekrarını girin.\");\r\n      return;\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      setError(\"Şifre en az 8 karakter olmalıdır.\");\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setError(\"Şifre ve şifre tekrarı eşleşmiyor.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Backend DTO'suna göre bu alan adları değişebilir.\r\n      // En yaygın olan: { token, newPassword, confirmPassword }\r\n      const payload = {\r\n        token,\r\n        newPassword: password,\r\n        confirmPassword,\r\n      };\r\n\r\n      console.log(\"Reset password payload:\", payload);\r\n\r\n      const res = await api.post(\"/auth/reset-password\", payload);\r\n\r\n      if (res.data?.success) {\r\n        setSuccess(\r\n          \"Şifreniz başarıyla güncellendi. 3 saniye içinde giriş sayfasına yönlendirileceksiniz.\"\r\n        );\r\n        setPassword(\"\");\r\n        setConfirmPassword(\"\");\r\n\r\n        setTimeout(() => {\r\n          navigate(\"/login\");\r\n        }, 3000);\r\n      } else {\r\n        setError(\r\n          res.data?.message ||\r\n            \"Şifre sıfırlama işlemi gerçekleştirilemedi. Link geçersiz veya süresi dolmuş olabilir.\"\r\n        );\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Reset password error:\", err);\r\n      const msg =\r\n        err.response?.data?.message ||\r\n        \"Şifre sıfırlama sırasında bir hata oluştu. Lütfen daha sonra tekrar deneyin.\";\r\n      setError(msg);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2 className=\"title\">Yeni Şifre Belirle</h2>\r\n\r\n      <p style={{ fontSize: 14, marginBottom: 10 }}>\r\n        Lütfen yeni şifrenizi belirleyin. Şifreniz en az 8 karakter olmalıdır.\r\n      </p>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"input\"\r\n          type=\"password\"\r\n          placeholder=\"Yeni şifre\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n\r\n        <input\r\n          className=\"input\"\r\n          type=\"password\"\r\n          placeholder=\"Yeni şifre (tekrar)\"\r\n          value={confirmPassword}\r\n          onChange={(e) => setConfirmPassword(e.target.value)}\r\n          style={{ marginTop: 8 }}\r\n        />\r\n\r\n        {error && (\r\n          <p style={{ color: \"red\", marginTop: 10, fontSize: 14 }}>{error}</p>\r\n        )}\r\n        {success && (\r\n          <p style={{ color: \"green\", marginTop: 10, fontSize: 14 }}>\r\n            {success}\r\n          </p>\r\n        )}\r\n\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          type=\"submit\"\r\n          disabled={isSubmitting}\r\n          style={{ marginTop: 12 }}\r\n        >\r\n          {isSubmitting ? \"Şifre güncelleniyor...\" : \"Şifreyi güncelle\"}\r\n        </button>\r\n      </form>\r\n\r\n      <p style={{ marginTop: 15 }}>\r\n        Giriş sayfasına dönmek için{\" \"}\r\n        <Link to=\"/login\" style={{ color: \"#1a73e8\", fontWeight: 600 }}>\r\n          tıklayın\r\n        </Link>\r\n        .\r\n      </p>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}